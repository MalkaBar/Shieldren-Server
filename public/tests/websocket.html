<!doctype html>  
<html lang="en">  
    <head>
        <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
        <script src="/socket.io/socket.io.js"></script>
        <script>
            var socket = io.connect("ws://localhost:3333");
            
            var phone = '0586664440';

            socket.on('response', (response) => {
                $('div').append('Server Response: ' + JSON.stringify(response) + '<br><br>');
                if (response.message === 'connected') return socket.emit('request', {'message': 'qr', 'value': phone});
                if (response.message === 'qr')
                {
                    if (response.value === 'start') return;
                    if (response.value === 'end') return socket.disconnect();
                    if (response.value === 'failed') return socket.emit('request', {'message': 'qr', 'value': phone});
                    if (response.value) {return; } //@TODO: here the QR is sent - display to user
                }
            });
        </script>
    </head>
    <body>
        <h1>WebSocket Test</h1>
        <div id="response_alerts"></div>
        
    </body>
</html> 